(this["webpackJsonpproject-budget-planner"]=this["webpackJsonpproject-budget-planner"]||[]).push([[0],{45:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(21),s=n.n(a),o=(n(54),n(11)),i=n.n(o),l=n(85),u=n(86),j=n(49),d=n(6),b=n(1),p=function(){var e=Object(d.f)(),t=localStorage.getItem("ownername");return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(l.a,{bg:"dark",variant:"dark",children:[Object(b.jsx)(l.a.Brand,{href:"/",children:"Project Budget Planner"}),Object(b.jsx)(u.a,{className:"mr-auto",children:Object(b.jsx)(u.a.Link,{href:"/",children:"Home"})}),Object(b.jsxs)("div",{className:"form-inline",children:[Object(b.jsx)(j.a,{variant:"outline-light",className:"mr-sm-2",children:t||"User"}),Object(b.jsx)(j.a,{variant:"light",onClick:function(){localStorage.removeItem("token"),e.push("/login")},children:"Logout"})]})]})})},h=function(){return Object(b.jsx)(l.a,{className:"justify-content-center",children:Object(b.jsx)("p",{className:"text-center mt-4 mb-4",children:"Copyright \xa9 2021 - Musa Ugurlu"})})},m=n(7),O=function(e){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("span",{children:["Budget: $",e.budget]}),Object(b.jsx)("button",{type:"button",className:"btn btn-primary",onClick:e.handleEditClick,children:"Edit"})]})},g=function(e){var t=Object(c.useState)(e.budget),n=Object(m.a)(t,2),r=n[0],a=n[1];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("input",{required:"required",type:"number",className:"form-control mr-3",id:"name",value:r,onChange:function(e){return a(e.target.value)}}),Object(b.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){return e.handleSaveClick(r)},children:"Save"})]})},x=n(8),f=n.n(x),v=n(16);function N(){return(N=Object(v.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.a.post("projects/".concat(t,"/addExpense"),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(v.a)(f.a.mark((function e(t,n,c,r){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.a.post("/projects/".concat(t,"/deleteExpense"),{id:n,name:c,cost:r}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(v.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.a.post("projects/create",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(v.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.a.get("/projects"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(v.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.a.get("/projects/".concat(t)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(v.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.a.post("/projects/".concat(t,"/delete")));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(v.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.a.post("/projects/".concat(t,"/setBudget"),{budget:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,t){return U.apply(this,arguments)}function U(){return(U=Object(v.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.a.post("auth/login",{email:t,password:n},{headers:{Authorization:null}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E=function(e){var t=e.project,n=e.triggerUpdate,r=Object(c.useState)(!1),a=Object(m.a)(r,2),s=a[0],o=a[1];return Object(b.jsx)("div",{className:"alert alert-secondary p-3 d-flex align-items-center justify-content-between",children:s?Object(b.jsx)(g,{handleSaveClick:function(e){(function(e,t){return I.apply(this,arguments)})(t.id,e).then((function(e){n(),o(!1)})).catch((function(e){n(),o(!1)}))},budget:t.budget}):Object(b.jsx)(O,{handleEditClick:function(){o(!0)},budget:t.budget})})},z=function(e){var t=e.project,n=t.expenses.reduce((function(e,t){return e+t.cost}),0),c=n>t.budget?"alert-danger":"alert-success";return Object(b.jsx)("div",{className:"alert p-4 ".concat(c),children:Object(b.jsxs)("span",{children:["Remaining: $",t.budget-n]})})},F=function(e){var t=e.project.expenses.reduce((function(e,t){return e+t.cost}),0);return Object(b.jsx)("div",{className:"alert alert-primary p-4",children:Object(b.jsxs)("span",{children:["Spent so far: $",t]})})},P=n(10),q=function(e){var t=e.project,n=e.triggerUpdate,r=Object(c.useState)(""),a=Object(m.a)(r,2),s=a[0],o=a[1],i=Object(c.useState)(""),l=Object(m.a)(i,2),u=l[0],j=l[1];return Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c={name:s,cost:parseInt(u)};(function(e,t){return N.apply(this,arguments)})(t.id,c).then((function(e){n(),P.b.success("\u2714\ufe0f Expense added!")})).catch((function(e){console.log(e)})),o(""),j("")},children:[Object(b.jsxs)("div",{className:"row",children:[Object(b.jsxs)("div",{className:"col-sm col-lg-4",children:[Object(b.jsx)("label",{htmlFor:"name",children:"Name"}),Object(b.jsx)("input",{required:"required",type:"text",className:"form-control",id:"name",value:s,onChange:function(e){return o(e.target.value)}})]}),Object(b.jsxs)("div",{className:"col-sm col-lg-4",children:[Object(b.jsx)("label",{htmlFor:"cost",children:"Cost"}),Object(b.jsx)("input",{required:"required",type:"number",className:"form-control",id:"cost",value:u,onChange:function(e){return j(e.target.value)}})]})]}),Object(b.jsx)("div",{className:"row mt-3",children:Object(b.jsx)("div",{className:"col-sm",children:Object(b.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Save"})})})]})},B=n(26),A=function(e){var t=e.id,n=e.projectId,c=e.name,r=e.cost,a=e.triggerUpdate;return Object(b.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[c,Object(b.jsxs)("div",{children:[Object(b.jsxs)("span",{className:"badge badge-primary badge-pill mr-3",children:["$",r]}),Object(b.jsx)(B.a,{size:"1.5em",onClick:function(){(function(e,t,n,c){return y.apply(this,arguments)})(n,t,c,r).then((function(e){P.b.success("\u2714\ufe0f Expense deleted!"),a()})).catch((function(e){console.log(e),P.b.error("\ud83d\udd25 Expense removal failed!")}))}})]})]})},T=function(e){var t=e.project,n=e.triggerUpdate,r=Object(c.useState)(t.expenses||[]),a=Object(m.a)(r,2),s=a[0],o=a[1];Object(c.useEffect)((function(){o(t.expenses)}),[t.expenses]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("input",{type:"text",className:"form-control mb-2 mr-sm-2",placeholder:"Type to search...",onChange:function(e){var n=t.expenses.filter((function(t){return t.name.toLowerCase().includes(e.target.value.toLowerCase())}));o(n)}}),Object(b.jsx)("ul",{className:"list-group mt-3 mb-3",children:null===s||void 0===s?void 0:s.map((function(e){return Object(b.jsx)(A,{projectId:t.id,id:e.id,name:e.name,cost:e.cost,triggerUpdate:n},e.id)}))})]})},G=n(84),D=function(){var e=Object(d.g)().projectId,t=Object(c.useState)(),n=Object(m.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)(!0),o=Object(m.a)(s,2),i=o[0],l=o[1];Object(c.useEffect)((function(){i&&function(e){return C.apply(this,arguments)}(e).then((function(e){a(e.data),l(!1)})).catch((function(e){console.log(e),l(!1)}))}),[i]);var u=function(){l(!0)};return i?Object(b.jsx)("div",{children:"Loding..."}):Object(b.jsxs)(G.a,{children:[Object(b.jsxs)("h1",{className:"mt-3",children:[" ",r.name]}),Object(b.jsx)("sub",{children:"Project Budget Planner"}),Object(b.jsxs)("div",{className:"row mt-3",children:[Object(b.jsx)("div",{className:"col-sm",children:Object(b.jsx)(E,{project:r,triggerUpdate:u})}),Object(b.jsx)("div",{className:"col-sm",children:Object(b.jsx)(z,{project:r})}),Object(b.jsx)("div",{className:"col-sm",children:Object(b.jsx)(F,{project:r})})]}),Object(b.jsx)("h3",{className:"mt-3",children:"Expenses"}),Object(b.jsx)("div",{className:"row ",children:Object(b.jsx)("div",{className:"col-sm",children:Object(b.jsx)(T,{project:r,triggerUpdate:u})})}),Object(b.jsx)("h3",{className:"mt-3",children:"Add Expense"}),Object(b.jsx)("div",{className:"row mt-3",children:Object(b.jsx)("div",{className:"col-sm",children:Object(b.jsx)(q,{project:r,triggerUpdate:u})})})]})},$=function(e){var t=e.triggerUpdate,n=Object(c.useState)(""),r=Object(m.a)(n,2),a=r[0],s=r[1],o=Object(c.useState)(""),i=Object(m.a)(o,2),l=i[0],u=i[1];return Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),function(e){return w.apply(this,arguments)}({name:a,budget:parseFloat(l),expenses:[]}).then((function(e){t()})).catch((function(e){console.log(e.response)})),s(""),u("")},children:[Object(b.jsxs)("div",{className:"row",children:[Object(b.jsxs)("div",{className:"col-sm col-lg-4",children:[Object(b.jsx)("label",{htmlFor:"name",children:"Name"}),Object(b.jsx)("input",{required:"required",type:"text",className:"form-control",id:"name",value:a,onChange:function(e){return s(e.target.value)}})]}),Object(b.jsxs)("div",{className:"col-sm col-lg-4",children:[Object(b.jsx)("label",{htmlFor:"budget",children:"Budget"}),Object(b.jsx)("input",{required:"required",type:"number",className:"form-control",id:"budget",value:l,onChange:function(e){return u(e.target.value)}})]})]}),Object(b.jsx)("div",{className:"row mt-3",children:Object(b.jsx)("div",{className:"col-sm",children:Object(b.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Save"})})})]})},M=n(20),R=function(e){var t=e.id,n=e.name,c=e.budget,r=e.triggerUpdate;return Object(b.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Object(b.jsx)(M.b,{to:"/projects/"+t,children:n}),Object(b.jsxs)("div",{children:[Object(b.jsxs)("span",{className:"badge badge-primary badge-pill mr-3",children:["$",c]}),Object(b.jsx)(B.a,{size:"1.5em",onClick:function(){(function(e){return k.apply(this,arguments)})(t).then((function(e){r()})).catch((function(e){console.log(e)}))}})]})]})},H=function(){var e=Object(c.useState)([]),t=Object(m.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(n||[]),s=Object(m.a)(a,2),o=s[0],i=s[1],l=Object(c.useState)(!0),u=Object(m.a)(l,2),j=u[0],p=u[1],h=Object(d.f)();Object(c.useEffect)((function(){j&&function(){return S.apply(this,arguments)}().then((function(e){r(e.data),i(e.data),p(!1)})).catch((function(e){console.log(e.response),e.response.status&&401===e.response.status&&(localStorage.removeItem("token"),P.b.error("Session Expired. Please login again"),h.push("/login")),e.response.status&&403===e.response.status&&(P.b.error("\ud83d\udd25 Unauthorized. Please login again"),h.push("/login"))}))}),[j]);var O=function(){console.log("Triggering!!!"),p(!0)};return j?Object(b.jsx)("div",{children:"Loading..."}):Object(b.jsxs)(G.a,{children:[Object(b.jsx)("h1",{children:"My Projects"}),Object(b.jsx)("input",{type:"text",className:"form-control mb-2 mr-sm-2",placeholder:"Type to search...",onChange:function(e){var t=n.filter((function(t){return t.name.toLowerCase().includes(e.target.value.toLowerCase())}));i(t)}}),Object(b.jsx)("ul",{className:"list-group mt-3 mb-3",children:null===o||void 0===o?void 0:o.map((function(e){return Object(b.jsx)(R,{id:e.id,name:e.name,budget:e.budget,triggerUpdate:O},e.id)}))}),Object(b.jsx)("br",{}),Object(b.jsx)("h3",{className:"mt-3",children:"Add Project"}),Object(b.jsx)("div",{className:"row mt-3",children:Object(b.jsx)("div",{className:"col-sm",children:Object(b.jsx)($,{triggerUpdate:O})})})]})},J=n(12),K=(n(45),function(){var e=Object(c.useState)(""),t=Object(m.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(m.a)(a,2),o=s[0],l=s[1],u=Object(d.f)();function p(){return(p=Object(v.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),L(n,o).then((function(e){localStorage.setItem("token",e.data.token),localStorage.setItem("ownername",e.data.firstName+" "+e.data.lastName),i.a.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token"),P.b.success("\u2714\ufe0f Successfully logged in!"),u.push("/")})).catch((function(e){P.b.error("\ud83d\udd25 Login failed!",{toastId:1}),localStorage.removeItem("token")}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsxs)("div",{className:"Login",children:[Object(b.jsx)("h2",{className:"head",children:"Login"}),Object(b.jsxs)(J.a,{onSubmit:function(e){return p.apply(this,arguments)},children:[Object(b.jsxs)(J.a.Group,{size:"lg",controlId:"email",children:[Object(b.jsx)(J.a.Label,{children:"Email"}),Object(b.jsx)(J.a.Control,{autoFocus:!0,type:"email",value:n,onChange:function(e){return r(e.target.value)}})]}),Object(b.jsxs)(J.a.Group,{size:"lg",controlId:"password",children:[Object(b.jsx)(J.a.Label,{children:"Password"}),Object(b.jsx)(J.a.Control,{type:"password",value:o,onChange:function(e){return l(e.target.value)}})]}),Object(b.jsx)(j.a,{block:!0,size:"lg",type:"submit",disabled:!(n.length>0&&o.length>0),children:"Login"})]}),Object(b.jsxs)("div",{style:{textAlign:"center",marginTop:"15px"},children:["Don't have an account? ",Object(b.jsx)(M.b,{to:"/signup",children:"Sign Up"})]})]})}),Q=function(){var e=Object(c.useState)(""),t=Object(m.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(m.a)(a,2),o=s[0],l=s[1],u=Object(c.useState)(""),p=Object(m.a)(u,2),h=p[0],O=p[1],g=Object(c.useState)(""),x=Object(m.a)(g,2),f=x[0],v=x[1],N=Object(d.f)();return Object(b.jsxs)("div",{className:"Login",children:[Object(b.jsx)("h2",{className:"head",children:"Sign Up"}),Object(b.jsxs)(J.a,{onSubmit:function(e){e.preventDefault(),function(e,t,n,c){return i.a.post("/owners/register",{firstName:e,lastName:t,email:n,password:c},{headers:{Authorization:null}})}(h,f,n,o).then((function(e){P.b.success("\u2714\ufe0f The user is successfully registered. Please login"),N.push("/login")})).catch((function(e){console.log(e),P.b.error("\ud83d\udd25 Registration failed!")}))},children:[Object(b.jsxs)(J.a.Group,{size:"lg",controlId:"firstName",children:[Object(b.jsx)(J.a.Label,{children:"First Name"}),Object(b.jsx)(J.a.Control,{autoFocus:!0,type:"firstName",value:h,onChange:function(e){return O(e.target.value)}})]}),Object(b.jsxs)(J.a.Group,{size:"lg",controlId:"lastName",children:[Object(b.jsx)(J.a.Label,{children:"Last Name"}),Object(b.jsx)(J.a.Control,{type:"lastName",value:f,onChange:function(e){return v(e.target.value)}})]}),Object(b.jsxs)(J.a.Group,{size:"lg",controlId:"email",children:[Object(b.jsx)(J.a.Label,{children:"Email"}),Object(b.jsx)(J.a.Control,{autoFocus:!0,type:"email",value:n,onChange:function(e){return r(e.target.value)}})]}),Object(b.jsxs)(J.a.Group,{size:"lg",controlId:"password",children:[Object(b.jsx)(J.a.Label,{children:"Password"}),Object(b.jsx)(J.a.Control,{type:"password",value:o,onChange:function(e){return l(e.target.value)}})]}),Object(b.jsx)(j.a,{block:!0,size:"lg",type:"submit",disabled:!(n.length>0&&o.length>0&&h.length>0&&f.length>0),children:"Sign Up"})]}),Object(b.jsxs)("div",{style:{textAlign:"center",marginTop:"15px"},children:["Already have an account? ",Object(b.jsx)(M.b,{to:"/login",children:"Login"})]})]})},V=(n(81),function(){return i.a.defaults.baseURL="http://localhost:8091",localStorage.getItem("token")&&(i.a.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token")),Object(b.jsxs)(M.a,{children:[Object(b.jsx)(P.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,toastId:"1"}),Object(b.jsxs)(d.c,{children:[Object(b.jsx)(d.a,{path:"/login",children:Object(b.jsx)(K,{})}),Object(b.jsx)(d.a,{path:"/signup",component:Q}),Object(b.jsxs)(d.a,{path:"/",children:[Object(b.jsx)(p,{}),Object(b.jsx)(d.a,{exact:!0,path:"/",children:Object(b.jsx)(H,{})}),Object(b.jsx)(d.a,{exact:!0,path:"/projects",children:Object(b.jsx)(H,{})}),Object(b.jsx)(d.a,{path:"/projects/:projectId",component:D})]})]}),Object(b.jsx)(h,{})]})});s.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(V,{})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.f5c64931.chunk.js.map